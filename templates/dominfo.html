{% extends "odinfo-base.html" %}
{% block title %}Dominion {{ dominion.name }} ({{ dominion.code }}){% endblock %}

{% block content %}
  <div class="w3-container">
    <a href="{{ url_for('dominfo', domcode=dominion.code, update='update' ) }}">Update</a> |
      <a href="{{ op_center_url }}/{{ dominion.code }}" target="_blank">OP Center</a>
    <table class="w3-table w3-striped w3-bordered w3-border w3-hoverable w3-white">
        <tr class="w3-black">
            <th>Ops Age</th>
            <th>Land</th>
            <th>Race</th>
            <th>Networth</th>
            <th>Population</th>
        </tr>
        <tr>
            <td  {% if 1 < ops_age <= 12 %}class="stale"{% elif ops_age > 12 %}class="invalid"{% endif %}>
                {{ ops_age }}
            </td>
            <td>
                {{ dominion.current_land }}
            </td>
            <td>
                {{ dominion.race }}
            </td>
            <td>
                {{ dominion.current_networth }}
            </td>
            <td>
                {{ dominion.last_cs.peasants }}
            </td>
        </tr>
        <tr class="w3-black">
            <th>Science Rating</th>
            <th>Keep Rating</th>
            <th>Spires Rating</th>
            <th>Forges Rating</th>
        </tr>
        <tr>
            {% if dominion.last_castle is not none %}
                <td>{{dominion.last_castle.science_rating | round(3) }}</td>
                <td>{{dominion.last_castle.keep_rating | round(3) }}</td>
                <td>{{dominion.last_castle.spires_rating | round(3) }}</td>
                <td>{{dominion.last_castle.forges_rating | round(3) }}</td>
            {% else %}
                <td>Unknown</td>
                <td>Unknown</td>
                <td>Unknown</td>
                <td>Unknown</td>
            {% endif %}
        </tr>
        <tr class="w3-black">
            <th>OP Bonus %</th>
            <th>OP</th>
            <th>Temples</th>
            <th>DP Bonus %</th>
            <th>DP</th>
        </tr>
        <tr>
            <td>{{ (military.offense_bonus * 100) | round(3) }}%</td>
            <td>{{ military.op }}</td>
            <td>{{ (dominion.buildings.ratio_of('temple') * 100)|round(1) }}%</td>
            <td>{{ (military.defense_bonus * 100)|round(1) }}%</td>
            <td>{{ military.dp }}</td>
        </tr>
        <tr class="w3-black">
            <th>Military Spy</th>
            <th>Military Wiz</th>
            <th>Spywiz Networth</th>
            <th>Spywiz Units</th>
            <th>Spy Ratios Estimate</th>
            <th>Wiz Ratios Estimate</th>
        </tr>
        <tr>
            <td>
                {{ ratios.spy_units_equiv }}
            </td>
            <td>
                {{ ratios.wiz_units_equiv }}
            </td>
            <td>
                {{ ratios.spywiz_networth }}
            </td>
            <td>
                {{ ratios.spywiz_units }}
            </td>
            <td>
                {{ ratios.spy_ratio_estimate }} - {{ ratios.max_spy_ratio_estimate }}
            </td>
            <td>
                {{ ratios.wiz_ratio_estimate }} - {{ ratios.max_wiz_ratio_estimate }}
            </td>
        </tr>
        <tr class="w3-black">
            <th>Unit 1</th>
            <th>Unit 2</th>
            <th>Unit 3</th>
            <th>Unit 4</th>
        </tr>
        <tr>
            <td>
                {{ military.amount(1) }}
            </td>
            <td>
                {{ military.amount(2) }}
            </td>
            <td>
                {{ military.amount(3) }}
            </td>
            <td>
                {{ military.amount(4)}}
            </td>
        </tr>
    </table><br>
  </div>
  <div class="w3-container">
      {{ nw_history_graph|safe }} {{ land_history_graph|safe }}
  </div>
  <div class="w3-container">

  </div>

{% endblock %}